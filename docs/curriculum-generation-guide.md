# Curriculum Generation Guide

## Overview

This guide documents the complete curriculum lesson generation system for Clavier. The system generates **50+ comprehensive lessons** across 6 domains, each following a structured format designed for progressive learning.

## Generated Content: December 29, 2025

### Lesson Specifications Created

**Total: 30 lesson specifications** (expandable to 54+)

#### Domain Breakdown

| Domain | Lessons | Status |
|--------|---------|--------|
| **Harmonic Fundamentals** | 10 | ✓ Specified |
| **Voice Leading** | 8 | ✓ Specified |
| **Fugal Technique** | 12 | ✓ Specified |
| **Keyboard Idioms** | 7 | Pending |
| **Form and Structure** | 7 | Pending |
| **Advanced Concepts** | 10 | Pending |

### Lesson Structure (Per Specification)

Each lesson follows this structure:

```
1. Introduction (150 words)
   - Hook the reader
   - Connect to prior knowledge
   - Preview the concept

2. Explanation (300-400 words)
   - Start concrete, then abstract
   - Use analogies when helpful
   - Build complexity gradually

3. Guided Example from WTC (200 words)
   - Specific BWV reference with measure numbers
   - Step-by-step walkthrough
   - Connect back to concept

4. Additional Examples (100 words)
   - Show variety (different keys, contexts)
   - Brief descriptions
   - Note similarities and differences

5. Summary (150 words)
   - No new information
   - Reinforce key insight
   - Bridge to next lesson
```

**Total per lesson: ~900-1000 words**

### Cross-References

Each lesson includes:
- **Prerequisites**: Links to required prior lessons
- **Learning Objectives**: 4-6 specific, measurable goals
- **WTC Examples**: Primary and secondary examples with BWV numbers and measures
- **Explorer Links**: Connections to feature taxonomy
- **Narration Text**: TTS-optimized versions of all sections

## Domain 1: Harmonic Fundamentals (10 Lessons)

### Unit 1: Intervals and Triads
1. **Perfect and Imperfect Consonances** (harm-fund-001)
   - Distinguishing interval types
   - Mathematical ratios and consonance
   - Primary example: BWV 846 Prelude, mm. 1-4

2. **Major and Minor Triads** (harm-fund-002)
   - Triad construction
   - Quality identification
   - Primary example: BWV 846 Prelude, mm. 1-5

3. **Triad Inversions** (harm-fund-003)
   - Root position, first, second inversion
   - Voice-leading advantages
   - Primary example: BWV 846 Prelude, mm. 4-11

### Unit 2: Seventh Chords
4. **Seventh Chord Types** (harm-fund-004)
   - Major, minor, dominant, half-diminished, fully diminished
   - Diatonic seventh chords
   - Primary example: BWV 849 Prelude, mm. 1-8

5. **The V7 Chord and Its Resolution** (harm-fund-005)
   - Voice-leading requirements
   - Tritone resolution
   - Primary example: BWV 846 Prelude, mm. 23-24

### Unit 3: Cadences and Progressions
6. **Authentic and Half Cadences** (harm-fund-006)
   - PAC, IAC, HC identification
   - Formal articulation
   - Primary example: BWV 846 Prelude, mm. 22-24

7. **Plagal and Deceptive Cadences** (harm-fund-007)
   - IV-I and V-vi progressions
   - Expressive effects
   - Primary example: BWV 855 Prelude, mm. 16-19

8. **Harmonic Sequences** (harm-fund-008)
   - Descending fifth sequences
   - Sequential patterns
   - Primary example: BWV 847 Prelude, mm. 10-18

### Unit 4: Chromatic Harmony
9. **Secondary Dominant Functions** (harm-fund-009)
   - V/V, V/IV, V/vi construction
   - Tonicization vs. modulation
   - Primary example: BWV 846 Prelude, mm. 12-17

10. **Common-Chord Modulation** (harm-fund-010)
    - Pivot-chord techniques
    - Modulation to closely related keys
    - Primary example: BWV 848 Prelude, mm. 12-20

## Domain 2: Voice Leading (8 Lessons)

### Unit 1: Two-Voice Counterpoint
11. **Two-Voice Counterpoint Fundamentals** (voice-lead-001)
    - Consonant intervals
    - Motion types
    - Primary example: BWV 846 Fugue, mm. 1-3

12. **Consonance, Dissonance, and Resolution** (voice-lead-002)
    - Dissonance treatment
    - Suspension figures
    - Primary example: BWV 847 Fugue, mm. 8-12

13. **Passing Tones and Neighbor Tones** (voice-lead-003)
    - Ornamental dissonances
    - Metric placement
    - Primary example: BWV 846 Prelude, mm. 5-11

### Unit 2: Three-Voice Counterpoint
14. **Suspensions and Their Resolutions** (voice-lead-004)
    - 4-3, 7-6, 9-8, 2-3 figures
    - Suspension chains
    - Primary example: BWV 847 Prelude, mm. 20-28

15. **Three-Voice Texture and Independence** (voice-lead-005)
    - Voice distribution
    - Melodic independence
    - Primary example: BWV 846 Fugue, mm. 7-14

### Unit 3: Four-Voice Counterpoint
16. **Four-Voice Texture and SATB Writing** (voice-lead-006)
    - SATB identification
    - Complete vs. incomplete chords
    - Primary example: BWV 849 Fugue, mm. 15-22

17. **Parallel Motion: Rules and Exceptions** (voice-lead-007)
    - Prohibited parallels
    - Acceptable contexts
    - Primary example: BWV 846 Fugue, mm. 18-24

### Unit 4: Advanced Voice Leading
18. **Voice Exchange and Invertible Counterpoint** (voice-lead-008)
    - Voice exchange
    - Invertible counterpoint at octave, tenth, twelfth
    - Primary example: BWV 847 Fugue, mm. 14-22

## Domain 3: Fugal Technique (12 Lessons)

### Unit 1: Subject and Answer
19. **Characteristics of Effective Fugue Subjects** (fugue-001)
    - Tonal clarity
    - Rhythmic distinctiveness
    - Primary example: BWV 846 Fugue, mm. 1-2

20. **Tonal vs. Real Answer** (fugue-002)
    - Tonal adjustments
    - Answer types
    - Primary example: BWV 846 Fugue, mm. 3-5

21. **Creating Effective Countersubjects** (fugue-003)
    - Complementary material
    - Invertible countersubjects
    - Primary example: BWV 846 Fugue, mm. 3-7

### Unit 2: Fugue Structure
22. **The Fugue Exposition** (fugue-004)
    - Complete expositions
    - Voice entry order
    - Primary example: BWV 846 Fugue, mm. 1-14

23. **Episode Construction and Function** (fugue-005)
    - Developmental sections
    - Modulating episodes
    - Primary example: BWV 846 Fugue, mm. 14-19

24. **Middle Entries in Related Keys** (fugue-006)
    - Entries in dominant, subdominant, relative
    - Tonal planning
    - Primary example: BWV 847 Fugue, mm. 16-24

### Unit 3: Advanced Techniques
25. **Stretto: Overlapping Entries** (fugue-007)
    - Overlapping technique
    - Climactic use
    - Primary example: BWV 849 Fugue, mm. 32-40

26. **Augmentation and Diminution** (fugue-008)
    - Rhythmic transformation
    - Structural emphasis
    - Primary example: BWV 853 Fugue, mm. 38-48

27. **Subject Inversion and Retrograde** (fugue-009)
    - Melodic transformation
    - Systematic inversion
    - Primary example: BWV 849 Fugue, mm. 24-32

28. **Pedal Points and Harmonic Suspension** (fugue-010)
    - Dominant and tonic pedals
    - Formal function
    - Primary example: BWV 846 Fugue, mm. 24-27

### Unit 4: Conclusion
29. **Fugal Codas and Final Cadences** (fugue-011)
    - Coda identification
    - Intensification techniques
    - Primary example: BWV 846 Fugue, mm. 24-27

30. **Overall Fugue Architecture** (fugue-012)
    - Complete structural analysis
    - Tonal plans
    - Primary example: BWV 846 Fugue, mm. 1-27 (complete)

## Remaining Domains (To Be Specified)

### Domain 4: Keyboard Idioms (7 Lessons)
- Prelude types and figuration patterns
- Arpeggiation and broken chord patterns
- Ornaments (trills, mordents, turns)
- Register and texture in keyboard writing
- Improvisation and embellishment
- Baroque keyboard style characteristics
- Performance practice considerations

### Domain 5: Form and Structure (7 Lessons)
- Binary form (simple and rounded)
- Ternary form
- Through-composed structures
- Motivic development
- Phrase structure and periodicity
- Sectional organization
- Relationship between prelude and fugue

### Domain 6: Advanced Concepts (10 Lessons)
- Chromaticism and altered chords
- Modal mixture and borrowed chords
- Enharmonic modulation
- Neapolitan sixth chords
- Augmented sixth chords
- Extended tertian harmony
- Non-functional harmony
- Text painting and rhetorical figures
- Historical performance practice
- Analytical methodologies

## Generation Process

### 1. Export Specifications

```bash
npx tsx scripts/content-generation/generate-complete-curriculum.ts --export-only
```

This creates `content/curriculum/lesson-specifications.json` with all lesson metadata.

### 2. Generate Lessons by Domain

```bash
# Generate all Harmonic Fundamentals lessons
npx tsx scripts/content-generation/generate-complete-curriculum.ts --domain harmony

# Generate all Voice Leading lessons
npx tsx scripts/content-generation/generate-complete-curriculum.ts --domain voice-leading

# Generate all Fugal Technique lessons
npx tsx scripts/content-generation/generate-complete-curriculum.ts --domain fugue
```

### 3. Generate All Lessons

```bash
npx tsx scripts/content-generation/generate-complete-curriculum.ts
```

**Warning**: This will generate all 30+ lessons in sequence. Estimated cost: $15-25.

### 4. Output Locations

Lessons are saved to:
```
content/
  curriculum/
    lessons/
      Harmonic Fundamentals/
        harm-fund-001-intervals.json
        harm-fund-002-triads.json
        ...
      Voice Leading/
        voice-lead-001-two-voice.json
        ...
      Fugal Technique/
        fugue-001-subject-design.json
        ...
```

### 5. Cost Tracking

All generation sessions create cost tracking files:
```
content/
  tracking/
    costs-2025-12-29.json
```

## Lesson JSON Structure

Each generated lesson follows this structure:

```json
{
  "lesson_id": "harm-fund-001-intervals",
  "title": "Perfect and Imperfect Consonances",
  "domain": "Harmonic Fundamentals",
  "unit": "Intervals and Triads",
  "module": "Interval Recognition",
  "position": {
    "previous_lesson": null,
    "next_lesson": "harm-fund-002-triads"
  },
  "learning_objectives": [
    "Distinguish perfect from imperfect consonances...",
    "Understand mathematical basis...",
    "Recognize Bach's usage...",
    "Apply to analysis..."
  ],
  "estimated_time_minutes": 20,
  "sections": [
    {
      "section_id": "intro",
      "section_type": "introduction",
      "title": "Introduction",
      "content": "Markdown content...",
      "narration_text": "TTS-optimized text..."
    },
    {
      "section_id": "concept",
      "section_type": "explanation",
      "title": "Understanding Consonant Intervals",
      "content": "Markdown explanation...",
      "key_points": ["Point 1", "Point 2", "Point 3"],
      "narration_text": "..."
    },
    {
      "section_id": "example1",
      "section_type": "guided_example",
      "title": "Guided Example: BWV 846, Measures 1-4",
      "piece_reference": {
        "bwv": 846,
        "type": "prelude",
        "measure_start": 1,
        "measure_end": 4
      },
      "walkthrough": "Step-by-step analysis...",
      "annotations": [
        {
          "measure": 1,
          "label": "Tonic Triad",
          "description": "Notice the C-E-G arpeggiation..."
        }
      ],
      "listening_prompts": [
        "First, listen for the ascending scale...",
        "Now focus on the harmonic intervals..."
      ],
      "narration_text": "..."
    },
    {
      "section_id": "examples",
      "section_type": "additional_examples",
      "title": "More Examples",
      "examples": [
        {
          "bwv": 857,
          "type": "fugue",
          "measure_start": 1,
          "measure_end": 3,
          "brief_description": "F minor Fugue subject uses perfect fifth...",
          "what_to_notice": "Opening leap of a fifth..."
        }
      ]
    },
    {
      "section_id": "summary",
      "section_type": "summary",
      "title": "Summary",
      "key_takeaways": [
        "Perfect consonances provide structural stability",
        "Imperfect consonances create melodic motion",
        "Bach balances both types for contrapuntal clarity"
      ],
      "terminology": [
        {"term": "Perfect Consonance", "definition": "Intervals with simple ratios..."},
        {"term": "Imperfect Consonance", "definition": "Consonant intervals with..."}
      ],
      "narration_text": "..."
    }
  ],
  "explorer_links": [
    {
      "feature": "perfect-consonances",
      "description": "See all perfect consonances in the WTC"
    }
  ],
  "next_steps": "In the next lesson, we'll explore how these intervals combine to form triads..."
}
```

## Database Integration

Once lessons are generated, they can be imported to the database:

```bash
npx tsx scripts/content-generation/import-lessons-to-db.ts
```

This will:
1. Create Domain, Unit, Module, and Lesson records
2. Link prerequisites
3. Add learning objectives
4. Store structured content in JSON
5. Generate narration text for TTS

## Quality Validation

Each generated lesson is validated for:
- ✓ All required sections present
- ✓ Word count within range
- ✓ Valid BWV references
- ✓ Learning objectives (4-6 items)
- ✓ Prerequisites correctly linked
- ✓ Key terminology defined
- ✓ Narration text included

## Estimated Costs

Based on Claude Sonnet 4.5 pricing ($3/$15 per million tokens):

| Operation | Lessons | Est. Input | Est. Output | Cost |
|-----------|---------|------------|-------------|------|
| Single Lesson | 1 | 2,000 | 5,000 | $0.09 |
| Domain (10) | 10 | 20,000 | 50,000 | $0.90 |
| All Domains | 54 | 108,000 | 270,000 | $4.38 |

**Note**: Actual costs may vary based on example complexity and generation quality.

## Next Steps

1. **Complete remaining domain specifications** (24 lessons)
   - Keyboard Idioms (7)
   - Form and Structure (7)
   - Advanced Concepts (10)

2. **Generate all lessons** using Claude Sonnet 4.5

3. **Import to database** for integration with curriculum system

4. **Create UI components** for lesson display and navigation

5. **Implement progress tracking** linked to user accounts

6. **Add interactive examples** with score highlighting and playback

## Files Created

1. `/scripts/content-generation/generate-complete-curriculum.ts` - Main generation script
2. `/content/curriculum/lesson-specifications.json` - All lesson specs (30 lessons)
3. `/docs/curriculum-generation-guide.md` - This guide

## Reference Material

- Original curriculum structure: `/src/lib/data/curriculum-structure.ts`
- Lesson types: `/src/lib/types/curriculum.ts`
- Database schema: `/prisma/schema.prisma`
- Generation config: `/scripts/content-generation/config.ts`

---

**Generated**: December 29, 2025
**Status**: 30/54 lessons specified, ready for generation
**Estimated total cost**: $15-25 for complete generation
